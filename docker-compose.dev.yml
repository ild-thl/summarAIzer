services:
    summaraizer:
        build:
            context: .
            dockerfile: Dockerfile.dev
        container_name: summaraizer
        ports:
            - "7860:7860"
        environment:
            GRADIO_SERVER_NAME: 0.0.0.0
            GRADIO_SERVER_PORT: 7860
            PYTHONUNBUFFERED: "1"
        volumes:
            - ./static:/app/static:z
            - ./ui:/app/ui:z
            - ./core:/app/core:z
            - ./resources:/app/resources:z
            - ./prompts:/app/prompts:z
            - ./.env:/app/.env:z
            - /app/.venv
        command:
            [
                "uvicorn",
                "app:app",
                "--host",
                "0.0.0.0",
                "--port",
                "7860",
                "--reload",
            ]
        stdin_open: true
        tty: true
        healthcheck:
            test: ["CMD", "curl", "-f", "http://localhost:7860/"]
            interval: 30s
            timeout: 10s
            retries: 3
